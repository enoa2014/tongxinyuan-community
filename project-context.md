# åŒå¿ƒæº (Tongxinyuan) é¡¹ç›®ä¸Šä¸‹æ–‡

> **æœ€åæ›´æ–°**: 2026-01-27
> **çŠ¶æ€**: æ—§ç‰ˆç½‘ç«™å·²éƒ¨ç½² (ECS), æ–°ç‰ˆç½‘ç«™è§„åˆ’å®Œæˆ
> **æŠ€æœ¯æ ˆ**: 
> - **æ—§ç‰ˆ**: PHP 7.4 + MySQL (Dockerized on ECS)
> - **æ–°ç‰ˆ**: Next.js + PocketBase (Self-hosted Go+SQLite)

## 4. é¡¹ç›®åœ°å›¾ä¸éƒ¨ç½²å‚è€ƒ (2026 æ›´æ–°)

### 4.1 ä½ç½® (ä»£ç ä¸æœåŠ¡å™¨)

| ç»„ä»¶ | æœ¬åœ°è·¯å¾„ (Windows) | è¿œç¨‹è·¯å¾„ (ECS) | è¯´æ˜ |
|---|---|---|---|
| **æ—§ç‰ˆç½‘ç«™** | `res\txy2020` | `/opt/txy2020` | è¿è¡Œåœ¨ 80/443 ç«¯å£ (ä¸»ç«™) |
| **æ–°ç‰ˆç½‘ç«™** | `tongxinyuan-community` | `/opt/tongxinyuan` | è¿è¡Œåœ¨ 3000/8090 ç«¯å£ (æµ‹è¯•/å¹¶è¡Œ) |
| **éƒ¨ç½²è„šæœ¬** | Root (`ws\2026\tongxy`) | `/tmp/` (æ‰§è¡ŒæœŸé—´) | è‡ªåŠ¨åŒ–è„šæœ¬ (`.ps1`, `.sh`) |

### 4.2 ç«¯å£æ˜ å°„

| ç¯å¢ƒ | æ—§ç‰ˆç½‘ç«™ (PHP) | æ–°ç‰ˆç½‘ç«™ (Next.js) | å¤‡æ³¨ |
|---|---|---|---|
| **æœ¬åœ°å¼€å‘** | `http://localhost:8000` | `http://localhost:3000` | ä¿®æ”¹æ—§ç‰ˆä¸º 8000 ä»¥é¿å…å†²çª |
| **ECS ç”Ÿäº§** | `https://tongxy.xyz` (443) | `https://tongxy.xyz:3000` | Nginx å¤„ç†ä¸¤è€…çš„ SSL (æ—§ç‰ˆåœ¨ 443, ä»£ç† 3000->3001) |

### 4.3 éƒ¨ç½²é€ŸæŸ¥è¡¨

*   **éƒ¨ç½²æ›´æ–° (æ–°ç‰ˆæˆ–æ—§ç‰ˆ)**
    *   **PowerShell**: `.\deploy_dual.ps1 -ServerIP ecs`
    *   **æ•ˆæœ**: æ›´æ–°é…ç½®ï¼Œé‡å¯å®¹å™¨ï¼Œç¡®ä¿ä¸¤ä¸ªç«™ç‚¹éƒ½è¿è¡Œã€‚

*   **æœ¬åœ°å¼€å‘**
    *   **æ—§ç‰ˆ**: `cd res/txy2020; docker-compose up -d`
    *   **æ–°ç‰ˆ**: `cd tongxinyuan-community; npm run dev`

## 1. æ ¸å¿ƒæˆ˜ç•¥è½¬å‹ (2025 -> 2026)
- **ä»**: "å¹³å°ä¾èµ–" (ä¾èµ–å…¬å‹ŸåŸºé‡‘ä¼šï¼Œé«˜é£é™©)ã€‚
- **åˆ°**: "è‡ªæˆ‘æˆé•¿" (ç‹¬ç«‹ç­¹æ¬¾ï¼Œç¤¾åŒºæ”¯æŒä¸­å¿ƒæ¨¡å¼)ã€‚
- **å…³é”®é©±åŠ¨åŠ›**: ç¬¦åˆæ–°æ…ˆå–„æ³• ("ç©¿é€å¼ç®¡ç†") å’Œå¯æŒç»­èµ„é‡‘éœ€æ±‚ã€‚

## 2. äº§å“æ„¿æ™¯: ç¤¾åŒºæ”¯æŒä¸­å¿ƒ
æœåŠ¡äºä»¥ä¸‹çš„æ•°å­—åŒ– + ç‰©ç†å¹³å°:
1.  **å®¶åº­**: ä½å®¿ï¼Œå–˜æ¯æœåŠ¡ï¼Œç”Ÿå‘½æ•™è‚²ï¼Œæ”¿ç­–æ´åŠ©ã€‚
2.  **å¿—æ„¿è€…**: ç»“æ„åŒ–æˆé•¿ (Level 1-3)ï¼Œæ ‡å‡†åŒ–è¿è¥ã€‚
3.  **å…¬ä¼—/æèµ è€…**: é€æ˜çš„å½±å“åŠ›æ•°æ®ï¼Œä¾¿æ·å‚ä¸å…¬å¼€æ´»åŠ¨ã€‚

## 3. å…³é”®éœ€æ±‚ ("å¿…é¡»æœ‰")
- **å›½å†…è®¿é—®**: æ— éœ€ VPNã€‚å¿…é¡»ä½¿ç”¨å›½å†…äº‘ (MemFire, è…¾è®¯/é˜¿é‡Œäº‘)ã€‚
- **å¤šç«¯åŒæ­¥**: Web (PC/æ‰‹æœº) + å¾®ä¿¡å°ç¨‹åºå¿…é¡»å…±äº«åŒä¸€ä¸ªæ•°æ®åº“ã€‚
- **è¿è¥ä¼˜å…ˆ**: ä¸“æ³¨äºè§£å†³ "ç¤¾å·¥æ•ˆç‡" (ä¸å†ä½¿ç”¨æ‰‹åŠ¨ Excel)ã€‚
- **æ•°æ®ä¸»æƒ**: è¿è¥æ•°æ® (æœåŠ¡æ—¥å¿—ï¼Œèµ„æº) å¿…é¡»æ•°å­—åŒ–ä¸”å¯å®¡è®¡ã€‚

## 4. åŠŸèƒ½è·¯çº¿å›¾ (MVP)
- **è¿è¥æ§åˆ¶å°**: å®¶åº­ç®¡ç†ï¼Œæ´»åŠ¨æ’æœŸï¼Œæ•°æ®ä»ªè¡¨ç›˜ã€‚
- **å¿—æ„¿è€… App**: æ³¨å†Œï¼Œæ‰«ç ç­¾åˆ°ï¼ŒæœåŠ¡æ—¥å¿—ã€‚
- **å®¶åº­ App**: æœåŠ¡ç”³è¯·ï¼Œ**æ”¿ç­–åŠ©æ‰‹**ï¼Œ**å…±äº«å¨æˆ¿é¢„è®¢**ã€‚
- **å…¬ä¼—é—¨æˆ·**: SEO å‹å¥½çš„å®˜ç½‘ï¼Œç®€åŒ–çš„æ´»åŠ¨æŠ¥å (è®¿å®¢æ¨¡å¼)ã€‚

## 5. å…³é”®æ–‡æ¡£
- **äº§å“ç®€æŠ¥**: `_bmad-output/01-strategy/product-brief.md` (åŸå§‹éœ€æ±‚äº‹å®æ¥æº)
- **æŠ€æœ¯è®¡åˆ’**: `_bmad-output/01-strategy/technical-implementation-plan.md` (æ¶æ„)
- **è°ƒç ”**: `_bmad-output/02-analysis/findings.md` (åŸå§‹ PPT/PDF åˆ†æ)

## 6. å…³é”®å·¥ç¨‹è§„åˆ™ (Critical Engineering Rules)
> **å¿…é¡»ä¸¥æ ¼éµå®ˆçš„æœ¬åœ°ç¯å¢ƒçº¦æŸ**
> **ğŸ”´ æœ€é«˜ä¼˜å…ˆçº§ (HIGHEST PRIORITY): é˜¶æ®µé—¨ç¦ (Phase Gate Control)**
> *   **ç¦æ­¢è‡ªåŠ¨æ¨è¿›**: ä¸¥ç¦åœ¨æœªè·å¾—ç”¨æˆ·**æ˜ç¡®æ‰“å­—ç¡®è®¤**çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ä¸ªä¸»è¦é˜¶æ®µ (Phase) æˆ–å­é˜¶æ®µã€‚
> *   **Explicit Confirmation**: DO NOT proceed to the next stage without typed user confirmation.

1.  **PowerShell å…¼å®¹æ€§**:
    *   **ç¦æ­¢ä½¿ç”¨ `&&`**: PowerShell ä¸æ”¯æŒ `&&` è¿ç®—ç¬¦ï¼ˆé™¤éåœ¨ PowerShell 7+ ä¸”é…ç½®æ­£ç¡®ï¼Œä½†é»˜è®¤ç¯å¢ƒä¸å¯é ï¼‰ã€‚
    *   **æ›¿ä»£æ–¹æ¡ˆ**: ä½¿ç”¨ `;` åˆ†éš”å‘½ä»¤ï¼Œæˆ–å°†å¤šä¸ªå‘½ä»¤æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ `run_command` è°ƒç”¨ã€‚
2.  **å›¾ç‰‡èµ„æº**:
    *   **è·¯å¾„**: æ‰€æœ‰é™æ€å›¾ç‰‡å¿…é¡»å­˜æ”¾åœ¨ `apps/web/public/images/`ã€‚
    *   **å¼•ç”¨**: ä»£ç ä¸­å¼•ç”¨æ—¶ï¼Œè·¯å¾„å§‹ç»ˆä»¥ `/images/` å¼€å¤´ï¼ˆä¾‹å¦‚ `/images/banner.png`ï¼‰ã€‚
3.  **Docker ç¼“å­˜**:
    *   å¦‚æœä¿®æ”¹äº†ä»£ç ä½† Docker å®¹å™¨æœªæ›´æ–°ï¼Œ**å¿…é¡»**æ‰§è¡Œ `docker exec ... rm -rf .next` å¹¶é‡å¯å®¹å™¨ã€‚å•çº¯é‡å¯å¾€å¾€æ— æ•ˆã€‚

## 7. ç–‘éš¾æ’æŸ¥ä¸ç»éªŒæ²‰æ·€ (Troubleshooting & Lessons Learned)

### 2026-01-29: Admin 400 é”™è¯¯ä¸ Schema ä¸¢å¤±äº‹ä»¶

#### é—®é¢˜æè¿°
åå°ç®¡ç†åˆ—è¡¨ `/admin/volunteers` åœ¨æŒ‰æ—¶é—´æ’åº (`sort=-created`) æ—¶æŠ¥é”™ `400 Bad Request`ã€‚åŒæ—¶ï¼Œæ•°æ®åº“ä¸­éƒ¨åˆ†è®°å½•æ˜¾ç¤ºä¸º "Invalid Date" ä¸”æ— å­—æ®µå†…å®¹ã€‚

#### æ ¹æœ¬åŸå›  (Root Causes)
1.  **PocketBase Schema è¯­æ³•å˜åŠ¨ (v0.20+ -> v0.26+)**:
    *   åœ¨æ—§ç‰ˆè„šæœ¬ä¸­ä¹ æƒ¯ä½¿ç”¨ `schema: [...]` å®šä¹‰å­—æ®µã€‚
    *   **ç°çŠ¶**: æ–°ç‰ˆ SDK åºŸå¼ƒäº† `schema` å±æ€§ï¼Œæ”¹ä¸º `fields`ã€‚å¯¼è‡´è¡¨è¢«åˆ›å»ºä¸ºç©ºå£³ (Empty Shell)ï¼Œåªæœ‰ IDï¼Œæ²¡æœ‰ `name`/`created` ç­‰å­—æ®µã€‚è¿™ä¹Ÿæ˜¯ 400 é”™è¯¯çš„ç›´æ¥åŸå›  (å­—æ®µä¸å­˜åœ¨)ã€‚
2.  **Next.js 15 Route Handler ç ´åæ€§æ›´æ–°**:
    *   **ç°çŠ¶**: `params` å‚æ•°å˜æˆäº† **Promise**ã€‚ç›´æ¥è®¿é—® `params.path` ä¼šå¯¼è‡´ Proxy å´©æºƒ (500 Error)ã€‚
    *   **ä¿®å¤**: å¿…é¡»ä½¿ç”¨ `const { path } = await params`ã€‚

#### è§£å†³æ–¹æ¡ˆä¸è§„èŒƒ
1.  **Schema ä¿®å¤**: ä½¿ç”¨ `pb.collections.import()` é…åˆæ­£ç¡®çš„æ–°ç‰ˆ `fields` è¯­æ³•è¿›è¡Œè¦†ç›–æ›´æ–°ã€‚**ç¦æ­¢**ç®€å•çš„â€œåˆ é™¤é‡é€ â€ (Delete & Recreate)ï¼Œå› ä¸ºå¯èƒ½å› å¤–é”®çº¦æŸå¤±è´¥ã€‚
2.  **Proxy è§„èŒƒ**: æ‰‹åŠ¨ä»£ç† (`route.ts`) å¿…é¡»å¤„ç†å¥½ Headers æ¸…æ´—å’Œ Params awaitingã€‚
3.  **æ•°æ®æ¸…æ´—**: ç¼–å†™è„šæœ¬ (`scripts/cleanup-bad-data.ts`) æ¸…ç†å›  Schema é”™è¯¯äº§ç”Ÿçš„å¹½çµæ•°æ®ã€‚

### 2026-01-29: ä¸šåŠ¡æµé—­ç¯ä¸å®¡è®¡æ—¥å¿—

#### 8.1 ä¸šåŠ¡çŠ¶æ€æœº
ä¸ºäº†è§£å†³è¯¯æ“ä½œé—®é¢˜ï¼Œæ”¾å¼ƒäº†å•å‘çŠ¶æ€æµï¼ˆå¦‚åªèƒ½ Pending -> Approvedï¼‰ï¼Œæ”¹ä¸º**å…¨è”é€šçŠ¶æ€æœº**ï¼š
*   **å…è®¸æ‚”æ£‹**: ä»»æ„çŠ¶æ€å‡å¯é‡ç½®ä¸º `Pending` (å¾…å®¡æ ¸/å¾…å¤„ç†)ã€‚
*   **å®‰å…¨é—¨ç¦**: å‡¡æ˜¯**é€†å‘æ“ä½œ**ï¼ˆå¦‚ Approved -> Rejected, Resolved -> Pendingï¼‰ï¼Œå‰ç«¯å¿…é¡»å¼¹å‡º `<AlertDialog>` äºŒæ¬¡ç¡®è®¤ã€‚

#### 8.2 å®¡è®¡æ—¥å¿— (Audit Log) æ ‡å‡†
æ‰€æœ‰å…³é”®ä¸šåŠ¡è¡¨ï¼ˆå¿—æ„¿è€…ã€å’¨è¯¢ã€æèµ ï¼‰å‡åº”åŒ…å« `history` (JSON) å­—æ®µï¼Œå­˜å‚¨ä¸å¯å˜çš„æ“ä½œè®°å½•ã€‚
**æ•°æ®ç»“æ„**:
```json
[
  {
    "action": "é€šè¿‡ç”³è¯·",      // åŠ¨ä½œæè¿°
    "date": "ISO8601 Sting",   // 2026-01-29T12:00:00.000Z
    "operator": "Admin",       // æ“ä½œäººæ ‡è¯†
    "prevStatus": "pending"    // ä¿®æ”¹å‰çŠ¶æ€
  }
]
```
**å±•ç¤ºè¦æ±‚**: åœ¨è¯¦æƒ…é¡µ Dialog åº•éƒ¨ä»¥æ—¶é—´è½´å½¢å¼æ¸²æŸ“ã€‚


### 2026-01-29: News CMS ä¸ PocketBase v0.23+ å‡çº§è¸©å‘

#### é—®é¢˜æè¿°
1.  **Admin æ–°é—»åˆ—è¡¨ 400 é”™è¯¯**: å¤ç°äº†ç±»ä¼¼ä¹‹å‰çš„ Schema é”™è¯¯ï¼Œä½†è¿™æ¬¡æ˜¯å› ä¸º `select` å­—æ®µã€‚
2.  **æ„å»ºå¤±è´¥**: `Cannot find module 'code-block-writer'`.

#### æ ¹æœ¬åŸå› ä¸ä¿®å¤
1.  **Schema ç»“æ„æ‰å¹³åŒ– (Flattening)**:
    *   **æ—§ç‰ˆ**: Select å­—æ®µ `options: { maxSelect: 1, values: [...] }`ã€‚
    *   **æ–°ç‰ˆ (v0.23+)**: ç»“æ„è¢«æ‰å¹³åŒ–ã€‚`maxSelect` å’Œ `values` å¿…é¡»ç›´æ¥ä½äºå­—æ®µå¯¹è±¡çš„é¡¶å±‚ï¼Œ**ä¸å†åµŒå¥—åœ¨ `options` ä¸­**ã€‚
    *   **åæœ**: å¦‚æœä½¿ç”¨åµŒå¥—ç»“æ„ï¼ŒPocketBase è¿”å› `validation_required` é”™è¯¯ï¼Œå› ä¸ºæ‰¾ä¸åˆ° `values`ã€‚
2.  **Shadcn CLI åºŸå¼ƒ**:
    *   **æ—§å‘½ä»¤**: `npx shadcn-ui@latest add ...` å·²ä¸å†ç»´æŠ¤ï¼Œä¼šå¯¼è‡´ä¾èµ–è§£æé”™è¯¯ã€‚
    *   **æ–°å‘½ä»¤**: å¿…é¡»ä½¿ç”¨ `npx shadcn@latest add ...`ã€‚
3.  **TSX/Node ç¼“å­˜é—®é¢˜**:
### 2026-01-29: News CMS ä¸ PocketBase v0.23+ å‡çº§è¸©å‘
... (ä¸Šæ–‡çœç•¥) ...

### 2026-01-29: ECS æœåŠ¡å™¨åˆ†æä¸éƒ¨ç½²ç­–ç•¥ (Infrastructure & Deployment)

#### 10.1 ECS ç›®å½•ç»“æ„åˆ†æ (åŸºäº `ls -R`)
æœåŠ¡å™¨ (`8.148.186.60`) è¿è¡Œç€ä¸¤å¥—ç‹¬ç«‹ç³»ç»Ÿï¼š

1.  **æ—§ç‰ˆ PHP ç³»ç»Ÿ (`/opt/txy2020`)**
    *   **çŠ¶æ€**: å®Œæ•´å½’æ¡£ï¼ŒåŒ…å« PHP ä»£ç ä¸å†å²é™„ä»¶ã€‚
    *   **æ ¸å¿ƒèµ„äº§**: `/opt/txy2020/statics/images`ã€‚
    *   **ä»·å€¼**: åŒ…å« 2020-2025 å¹´é—´ä¸Šä¼ çš„æ‰€æœ‰æ–°é—»/æ´»åŠ¨å›¾ç‰‡ã€‚æ–°ç‰ˆç³»ç»Ÿéƒ¨ç½²æ—¶ï¼Œ**å¿…é¡»**å°†æ­¤ç›®å½•å†…å®¹è¿ç§»æˆ–æŒ‚è½½åˆ°æ–°ç‰ˆ `public/images` ä¸‹ï¼Œå¦åˆ™å†å²æ–‡ç« é…å›¾ä¼šè£‚å¼€ã€‚

2.  **æ–°ç‰ˆ Docker ç³»ç»Ÿ (`/opt/tongxinyuan`)**
    *   **æ¶æ„**: Docker Compose (Postgres + Redis + Nginx)ã€‚
    *   **å…³é”®æ•°æ®**:
        *   `data/postgres`: æ•°æ®åº“æŒä¹…åŒ– (æ³¨æ„ï¼šè¿™æ˜¯æ—§çš„ Postgres æ•°æ®ï¼Œä¸æˆ‘ä»¬æœ€æ–°çš„ PocketBase æ¶æ„ä¸å…¼å®¹ï¼Œå¯èƒ½éœ€è¦å› åœ°åˆ¶å®œæ¸…ç†æˆ–è¿ç§»)ã€‚
        *   `nginx/certs`: HTTPS è¯ä¹¦ (`tongxy.xyz.pem`)ï¼Œ**ç»å¯¹ä¸èƒ½åˆ é™¤**ã€‚

#### 10.2 éƒ¨ç½²å¤‡ä»½ä¸æ¸…ç†ç­–ç•¥ (Deployment Lifecycle)
> **ç›®çš„**: é˜²æ­¢ååŒ…å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ï¼ŒåŒæ—¶é¿å…ç£ç›˜çˆ†æ»¡ã€‚

æ¯æ¬¡æ›´æ–° ECS ä¸Šçš„ Docker é•œåƒæ—¶ï¼Œ**å¿…é¡»**æ‰§è¡Œä»¥ä¸‹æ ‡å‡†æµç¨‹ï¼š

1.  **å¤‡ä»½ (Backup)**:
    *   åœ¨ `docker pull` æ‹‰å–æ–°é•œåƒ**ä¹‹å‰**ï¼Œå°†å½“å‰æ­£åœ¨è¿è¡Œçš„é•œåƒæ‰“æ ‡ç­¾å¤‡ä»½ã€‚
    *   **å‘½ä»¤ç¤ºä¾‹**: `docker tag tongxinyuan-web:latest tongxinyuan-web:backup-YYYYMMDD`
    *   **åŸå› **: å¦‚æœæ–°ç‰ˆé•œåƒå¯åŠ¨å¤±è´¥ (CrashLoopBackOff)ï¼Œå¯ç«‹å³å›æ»šåˆ° `backup-YYYYMMDD`ã€‚

2.  **æ›´æ–° (Update)**:
    *   æ‰§è¡Œæ ‡å‡†çš„ `docker-compose up -d --build` (æˆ–æ‹‰å–æ–°é•œåƒé‡å¯)ã€‚

3.  **æ¸…ç† (Cleanup)**:
    *   **ä¿ç•™ç­–ç•¥**: ä»…ä¿ç•™**å½“å‰è¿è¡Œç‰ˆæœ¬** (`latest`) å’Œ**æœ€è¿‘ä¸€ä¸ªå¤‡ä»½** (`backup-YYYYMMDD`)ã€‚
    *   **åˆ é™¤åŠ¨ä½œ**: åˆ é™¤æ‰€æœ‰æ›´æ—©çš„å†å²å¤‡ä»½ã€‚
    *   **å‘½ä»¤ç¤ºä¾‹**: `docker rmi tongxinyuan-web:backup-20251201` (åˆ é™¤æ—§çš„)ã€‚
    *   **åŸå› **: ECS ç£ç›˜ç©ºé—´æœ‰é™ï¼ŒDocker overlay2 æ–‡ä»¶ç³»ç»Ÿå®¹æ˜“è†¨èƒ€ã€‚

#### 10.3 å…³é”®é¿å‘ (Gotchas)
*   **å›¾ç‰‡ 404**: å³ä½¿ä»£ç æ›´æ–°äº†ï¼Œå¦‚æœ Docker å®¹å™¨å†…çš„å›¾ç‰‡è·¯å¾„æ²¡é…ç½® Proxy æˆ–æ²¡æŒ‚è½½æ—§ç‰ˆ `/opt/txy2020/statics`ï¼Œå†å²å›¾ç‰‡ä¾ç„¶ä¼šè£‚ã€‚è§£å†³æ–¹æ¡ˆè§ä»£ç ä¸­çš„ Proxy ä¿®å¤ã€‚
*   **URL è¿é€šæ€§**: Docker å†…éƒ¨è®¿é—® API **å¿…é¡»**ä½¿ç”¨å®¹å™¨é—´ç½‘ç»œ (å¦‚ `http://pocketbase:8090`)ï¼Œä¸¥ç¦ä½¿ç”¨ `localhost`ã€‚

### 2026-01-30: æœåŠ¡æ’åºä¸ Windows ç¯å¢ƒé…ç½® (Service Reordering & Env)

#### 1. æ‹–æ‹½æ’åº (Drag-and-Drop) å®ç°
*   **æŠ€æœ¯æ ˆ**: `@dnd-kit` (Core, Sortable, Utilities).
*   **Schema è¦æ±‚**: PocketBase `services` é›†åˆå¿…é¡»åŒ…å« `order` (Number) å­—æ®µã€‚
*   **å‘ç‚¹**: å¦‚æœ `order` å­—æ®µä¸å­˜åœ¨ï¼ŒSDK æ›´æ–°è¯·æ±‚ä¼šæˆåŠŸä½†æ•°æ®ä¸ä¼šä¿å­˜ã€‚åŠ¡å¿…æ£€æŸ¥ Schemaã€‚
*   **é€»è¾‘**: å‰ç«¯è®¡ç®—æ–° `order` (å…¨é‡æ›´æ–°ï¼Œ`order = total - index`) -> æ‰¹é‡å¹¶å‘å‘é€ Update è¯·æ±‚ -> ä¹è§‚æ›´æ–° UIã€‚

#### 2. Windows ç¯å¢ƒå˜é‡å¯¼è‡´å·¥å…·å¤±æ•ˆ
*   **é—®é¢˜**: Agent çš„ Browser Tool (Playwright) å¯åŠ¨å¤±è´¥ï¼ŒæŠ¥é”™ `failed to install playwright: $HOME environment variable is not set`.
*   **åŸå› **: Windows é»˜è®¤ä¸è®¾ç½® `HOME` å˜é‡ï¼Œè€Œåœ¨ Linux/Mac ç¯å¢ƒä¸‹è¿™æ˜¯æ ‡é…ã€‚
*   **ä¿®å¤**: PowerShell æ‰§è¡Œ `[Environment]::SetEnvironmentVariable("HOME", $env:USERPROFILE, "User")`ã€‚é‡å¯ç”Ÿæ•ˆã€‚

# 实施计划计划：2026 同心源社区支持中心网站 (MVP)

# 目标描述
为由于同心源构建一个“社区支持中心”数字化平台，以支持2026年的战略转型。该平台将服务于三个关键用户群体：家庭（服务申请）、志愿者（运营与任务）和管理员（后台管理），从而实现“自主生长”和“数字化合规”的目标。

主要目标：
1.  **运营数字化**：用集中式系统取代纸质/微信工作流。
2.  **志愿者赋能**：提供清晰的志愿者参与和管理路径。
3.  **影响力透明化**：为捐赠者和利益相关者可视化服务数据。

## 用户审查要求
> [!IMPORTANT]
> **技术栈调整 (中国特供版)**：
> 1.  **后端/数据库**: **MemFire Cloud (MemFireDB)**。这是 Supabase 的国内合作伙伴/替代品，完全兼容 Supabase 客户端，但在中国大陆访问速度快且无需翻墙。
> 2.  **前端框架**: **Next.js** (用于 PC/移动端 Web) + **Taro/Uni-app** (用于微信小程序)。两者公用同一个 MemFire 后端，确保数据互通。
> 3.  **部署**: **腾讯云 Webify** 或 **阿里云 OSS** (前端静态托管) + MemFire (后端托管)。坚决不使用 Vercel，因为它在墙内访问不稳定。

## 建议变更

### 架构
- **Web 端 (PC/H5)**: Next.js 14+ (App Router), Tailwind CSS. **(支持 SEO，利于公益活动传播)**
- **小程序端**: Taro (React 语法) 或 原生微信小程序 (为了极致体验)。
- **后端/数据库**: MemFire Cloud (PostgreSQL + Auth + Storage).
- **认证**: MemFire Auth (支持 **微信一键登录** + 手机号验证码，符合国内习惯)。**[NEW] 支持“游客模式” (Guest Mode)，部分公开页面无需登录即可访问。**
- **多端数据互通**: Web 端和小程序端共用同一个 MemFire `Project URL` 和 `API Key`，实现账号、数据完全实时同步。

### [NEW] 项目结构
#### [NEW] [tongxy-platform](file:///C:/Users/86152/work/2026/tongxy/tongxy-platform)
- 在 `tongxy-platform` 中初始化一个新的 Next.js 项目。
- 设置标准文件夹结构：`app`, `components`, `lib`, `types`。

### [NEW] 核心功能实现

#### 1. 数据库模式 (Supabase)
- **表结构**：
    - `profiles` (用户：家庭，志愿者，管理员)
    - `families` (患者信息，诊断，风险等级)
    - `volunteers` (技能，等级，服务时长)
    - `events` (活动，排班)
    - `registrations` (活动报名)
    - `service_logs` (签到，反馈)
    - `resources` (库存物品)
    - `policies` (政府/救助政策指南)
    - `kitchen_bookings` (共享厨房预约)

#### 2. 设计系统 (UI/UX)
- 实施“温暖与治愈”的调色板（例如，柔和的橙色/绿色）。
- 创建可复用组件：`Button`, `Card`, `FormInput`, `DataCard`。

#### 3. 基于角色的访问控制 (RBAC)
- 中间件根据角色保护路由 (`admin`, `volunteer`, `family`)。

#### 4. 功能模块
- **[NEW] 公众/游客网关 (Public Gateway)**:
    - **SEO 友好的官网**: 机构介绍、受助故事、公开募捐项目。
    - **公开活动日历**: 任何人可见。
    - **极简报名**: 仅需输入手机号+验证码即可报名公开培训/义卖活动（自动创建“游客档案”）。
- **管理员仪表盘**:
    - 概览卡片（家庭总数，活跃志愿者）。
    - 家庭管理数据表（批准/拒绝）。
    - 活动创建表单。
- **家庭门户**：
    - “申请服务”表单。
    - “我的活动”列表。
    - **[NEW] 政策助手**：“我符合条件吗？”向导 + 政策百科。
    - **[NEW] 厨房预约**：共享厨房预约日历视图。
- **志愿者门户**：
    - “浏览机会”列表。
    - “签到”二维码扫描器（使用 `react-qr-reader`）。

## 验证计划

### 自动化测试
- **Linting/类型检查**：`npm run lint` & `tsc`。
- **组件测试**：（MVP 阶段可选，通过速度优先）。

### 手动验证
1.  **流程 1：家庭注册**
    - 用户注册为“家庭”。
    - 管理员在仪表盘中批准。
    - 用户登录并看到“家庭门户”。
2.  **流程 2：活动循环**
    - 管理员创建“周日阅读”活动。
    - 志愿者注册活动。
    - 志愿者“签到”（模拟）。
    - 管理员看到更新的参与统计数据。
3.  **流程 3：数据完整性**
    - 验证“Excel 导入”（通过 SQL 种子模拟）是否正确填充数据库。
